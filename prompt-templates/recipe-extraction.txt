ã‚ãªãŸã¯ TypeScript ã«ç²¾é€šã—ãŸã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚

ç›®çš„ï¼š
- ã‚²ãƒ¼ãƒ ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰æƒ…å ±ã‚’æŠ½å‡ºã—ã€
- ä»¥ä¸‹ã® TypeScript å‹ã«å®Œå…¨æº–æ‹ ã—ãŸå¤‰æ•°ã¨å‹ã‚’ç”Ÿæˆã—ã€
- å¿…è¦ã§ã‚ã‚Œã°å‹ã®ä¿®æ­£æ¡ˆã‚’æç¤ºã™ã‚‹ã“ã¨ã€‚

ãƒ«ãƒ¼ãƒ«ï¼š
- UIä¸Šã®æ•°å€¤ã®å·¦ã«ã€Œæ™‚è¨ˆãƒãƒ¼ã‚¯ğŸ•’ã€ãŒã‚ã‚‹å ´åˆã€ãã®åŠ¹æœã¯ `isOverTime: true` ã¨ã™ã‚‹ã€‚
- æ™‚è¨ˆãƒãƒ¼ã‚¯ãŒãªã„å ´åˆã¯ `isOverTime: false`ã€‚
- æ™‚è¨ˆãƒãƒ¼ã‚¯ã®åˆ¤å®šã¯ã€ç”»åƒå†…ã®ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆğŸ•’ï¼‰ã¾ãŸã¯ãã®ä»£æ›¿è¡¨ç¾ï¼ˆä¾‹: å°ã•ãªæ™‚è¨ˆã€æ™‚é–“çµŒéã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’ã‚‚ã¨ã«è¡Œã†ã€‚
- æ™‚è¨ˆãƒãƒ¼ã‚¯ã®åˆ¤å®šã¯ã€ğŸ•’ã‚¢ã‚¤ã‚³ãƒ³ã®æœ‰ç„¡ã«åŠ ãˆã€åŠ¹æœãƒ©ãƒ™ãƒ«ã®å·¦å´ã«å°ã•ãªç°è‰²ã‚¢ã‚¤ã‚³ãƒ³ãŒä¸¦ã¶æ§‹é€ ã§ã‚ã‚Œã°ã€æ™‚é–“çµŒéåŠ¹æœã¨ã¿ãªã™ã€‚
- æ™‚è¨ˆãƒãƒ¼ã‚¯ã®èªè­˜ãŒæ›–æ˜§ãªå ´åˆã¯ã€åŠ¹æœãƒ©ãƒ™ãƒ«ã®ä½ç½®ãƒ»æ§‹é€ ãƒ»ä»–ã®åŠ¹æœã¨ã®æ¯”è¼ƒã‹ã‚‰è«–ç†çš„ã«åˆ¤å®šã™ã‚‹ã€‚
ç‰¹æ®ŠåŠ¹æœï¼š
- ã€Œã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–ã€ãªã©ã®ãƒ©ãƒ™ãƒ«ã¯ `CaffeineEffect` ã¨ã—ã¦æ‰±ã„ã€`amount` ã‚„ `isOverTime` ã¯ä¸è¦ã€‚
ç´ æã®æ‰±ã„ï¼š
- æ‰€æŒæ•°ï¼ˆä¾‹: "455/1"ã®455ï¼‰ã¯ç„¡è¦–ã—ã€å¿…è¦æ•°(ä¾‹: "455/1"ã®1)ã®ã¿ `amount` ã«åæ˜ ã™ã‚‹ã€‚
ãƒ©ãƒ™ãƒ«ã¨å¤‰æ•°åï¼š
- `effectName` ã¯åŠ¹æœã‚’è‹±èªã«ã—ãŸã‚‚ã®ã‚’ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ã™ã‚‹ã€‚
- `EffectLabel` ã¯UIã«è¡¨ç¤ºã•ã‚ŒãŸã¾ã¾ã‚’æ¡ç”¨ã™ã‚‹ã€‚
- æ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ã®å½¢çŠ¶ã‚’ç¤ºã™ç”»åƒãŒæ·»ä»˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®ç”»åƒã¯ã€Œæ™‚é–“çµŒéåŠ¹æœï¼ˆisOverTime: trueï¼‰ã€ã‚’ç¤ºã™ã‚¢ã‚¤ã‚³ãƒ³ã®åŸºæº–ã¨ã—ã¦æ‰±ã†ã€‚
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨æ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ç”»åƒãŒåŒæ™‚ã«æ·»ä»˜ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã¯ã€Œå˜ä½“ã®ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ãŒå†™ã£ã¦ã„ã‚‹ç”»åƒã€ã¨ã—ã¦è­˜åˆ¥ã™ã‚‹ã€‚
- ä»¥é™ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå†…ã§ã€ã“ã®åŸºæº–ç”»åƒã¨åŒã˜å½¢çŠ¶ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒåŠ¹æœãƒ©ãƒ™ãƒ«ã®å·¦ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®åŠ¹æœã¯ isOverTime: true ã¨åˆ¤å®šã™ã‚‹ã€‚
- æ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã¯ã€èƒŒæ™¯ãŒå˜è‰²ã§ã‚ã‚Šã€å˜ä¸€ã®ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ãŒæã‹ã‚Œã¦ã„ã‚‹ç”»åƒã¨ã—ã¦æ‰±ã†ã€‚
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯ UI è¦ç´ ã‚„ãƒ†ã‚­ã‚¹ãƒˆã‚’å«ã‚€ç”»åƒã¨ã—ã¦æ‰±ã†ã€‚

å‹ä¿®æ­£ãƒ«ãƒ¼ãƒ«ï¼š
- å‹ã«å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã¯ã€å½±éŸ¿ç¯„å›²ã‚’è€ƒæ…®ã—ã€ `Effect` / `EffectMap` / `Recipe` / `RequiredItem` / `IngredientName` ãªã© é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®å‹ã‚’ `typeFix` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã¾ã¨ã‚ã¦æç¤ºã™ã‚‹ã“ã¨ã€‚
- å®Œå…¨ãªå‹å®šç¾©ã§ã¯ãªãã€æ›´æ–°å¾Œã®éƒ¨åˆ†çš„ãªå·®åˆ†ã‚’ã¾ã¨ã‚ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ã€‚
- `typeFix` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ä¿®æ­£ãŒå¿…è¦ãªå ´åˆã®ã¿å‡ºåŠ›ã™ã‚‹ã€‚ä¸è¦ãªå ´åˆã¯çœç•¥ã™ã‚‹ã€‚

å‡ºåŠ›å½¢å¼ï¼š
- `recipeMapPatch`: `RecipeMap` å‹å¤‰æ•°ã¸ã®è¿½è¨˜åˆ†ã®ã¿ã‚’å‡ºåŠ›ã™ã‚‹ã€‚
- `typeFix` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€å‹ä¿®æ­£ãŒå¿…è¦ãªå ´åˆã®ã¿å‡ºåŠ›ã™ã‚‹ã€‚
`RECIPE_MAP` è¿½è¨˜ãƒ«ãƒ¼ãƒ«ï¼š
- ç”Ÿæˆã—ãŸ `Recipe` ã¯ã‚¢ãƒ—ãƒªå´ã§ `export const RECIPE_MAP: RecipeMap` ã«è¿½è¨˜ã—ã¦ä½¿ã†ã€‚
- å‡ºåŠ›ã®æœ€å¾Œã« `recipeMapPatch` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­ã‘ã€ `RECIPE_MAP` ã«è¿½åŠ ã™ã¹ãéƒ¨åˆ†ã ã‘ã‚’æ¬¡ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ï¼š
"""
{
  "<itemName>": <Recipe>,
  "<itemName>": <Recipe>,
	...
}
"""

å‹ï¼š
// RecipeType.ts
import { EFFECT_NAMES } from '@/nuka-mixer-recipe/EFFECT_NAMES'
import type { ITEM_NAME } from '@/nuka-mixer-recipe/ITEM_NAMES'
import { INGREDIENT_NAMES } from '@/nuka-mixer-recipe/INGREDIENT_NAMES'
import type { EFFECT_LABELS } from '@/nuka-mixer-recipe/EFFECT_LABELS'

/* ItemNameã¨çµ±åˆã—ãªã„ã»ã†ãŒ
 * ãƒ¬ã‚·ãƒ”ã§ç”Ÿæˆã§ããªã„ã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦åŒºåˆ¥ã§ãã¦ã‚ˆã•ãã†
 */
export type IngredientName = (typeof INGREDIENT_NAMES)[number]

export function isIngredientName(e: unknown): e is IngredientName {
	return INGREDIENT_NAMES.includes(e as IngredientName)
}

export type ItemName = (typeof ITEM_NAME)[number]

export type EffectName = (typeof EFFECT_NAMES)[number]

export type EffectLabel = (typeof EFFECT_LABELS)[number]

export function isEffectName(e: unknown): e is EffectName {
	return EFFECT_NAMES.includes(e as EffectName)
}

type BaseEffect = {
	effectName: EffectName
}

export type Effect =
	| HPEffect
	| APEffect
	| WeightEffect
	| ValueEffect
	| MaxHPEffect
	| MaxAPEffect
	| RadsEffect
	| RadResistEffect
	| CarryWeightEffect
	| CaffeineEffect
	| STREffect
	| ENDEffect
	| AGIEffect
	| DMGResistEffect

export interface HPEffect extends BaseEffect {
	effectName: 'hp'
	amount: number
	isOverTime: boolean
}

export interface APEffect extends BaseEffect {
	effectName: 'ap'
	amount: number
	isOverTime: boolean
}

export interface WeightEffect extends BaseEffect {
	effectName: 'weight'
	amount: number
}

export interface ValueEffect extends BaseEffect {
	effectName: 'value'
	amount: number
}

export interface MaxHPEffect extends BaseEffect {
	effectName: 'maxHp'
	amount: number
	isOverTime: boolean
}

export interface MaxAPEffect extends BaseEffect {
	effectName: 'maxAp'
	amount: number
	isOverTime: boolean
}

export interface RadsEffect extends BaseEffect {
	effectName: 'rads'
	amount: number
	isOverTime: boolean
}

export interface RadResistEffect extends BaseEffect {
	effectName: 'radResist'
	amount: number
	isOverTime: boolean
}

export interface CarryWeightEffect extends BaseEffect {
	effectName: 'carryWeight'
	amount: number
}

export function isCarryWeightEffect(
	effect: Effect,
): effect is CarryWeightEffect {
	return effect.effectName === 'carryWeight'
}

export interface CaffeineEffect extends BaseEffect {
	effectName: 'caffeine'
}

export interface STREffect extends BaseEffect {
	effectName: 'str'
	amount: number
	isOverTime: boolean
}

export interface ENDEffect extends BaseEffect {
	effectName: 'end'
	amount: number
	isOverTime: boolean
}

export interface AGIEffect extends BaseEffect {
	effectName: 'agi'
	amount: number
	isOverTime: boolean
}

export interface DMGResistEffect extends BaseEffect {
	effectName: EffectName
	amount: number
	isOverTime: boolean
}

export type EffectMap = {
	hp?: HPEffect
	ap?: APEffect
	weight?: WeightEffect
	value?: ValueEffect
	maxHp?: MaxHPEffect
	maxAp?: MaxAPEffect
	rads?: RadsEffect
	radResist?: RadResistEffect
	carryWeight?: CarryWeightEffect
	caffeine?: CaffeineEffect
	str?: STREffect
	end?: ENDEffect
	agi?: AGIEffect
	dmgResist?: DMGResistEffect
}

export type Recipe = {
	itemName: ItemName
	effects: EffectMap
	requiredItems: RequiredItem[]
}

export type RecipeMap = Partial<Record<ItemName, Recipe>>

export type RequiredItem = {
	requiredItemName: IngredientName
	amount: number
}


// EFFECT_NAMES.ts
export const EFFECT_NAMES = [
	'hp',
	'ap',
	'weight',
	'value',
	'maxHp',
	'maxAp',
	'rads',
	'radResist',
	'carryWeight',
	'caffeine',
	'str',
	'end',
	'agi',
	'dmgResist',
] as const



// ITEM_NAMES.ts
export const ITEM_NAME = [
	'ãƒ‹ãƒ¥ãƒ¼ã‚«ãƒ»ã‚³ãƒ¼ãƒ©',
	'ãƒŒã‚«ãƒ»ã‚¨ã‚¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ',
	'ãƒŒã‚«ãƒ»ã‚¯ãƒ¼ãƒ©ãƒ¼',
	'ãƒŒã‚«ãƒ»ã‚µã‚¤ãƒ‰',
	'ãƒŒã‚«ãƒ»ã‚µãƒ³ãƒ©ã‚¤ã‚º',
	'ãƒŒã‚«ãƒ»ãƒ„ã‚¤ãƒ³',
	'ãƒŒã‚«ãƒ»ãƒãƒ¼ãƒ†ã‚£',
	'ãƒŒã‚«ãƒ»ãƒã‚º',
	'ãƒŒã‚«ãƒ»ãƒ‘ãƒ¯ãƒ¼',
	'ãƒŒã‚«ãƒ»ãƒ‘ãƒ³ãƒ',
	'ãƒŒã‚«ãƒ»ãƒ•ã‚¡ãƒ³ã‚·ãƒ¼',
	'ãƒŒã‚«ãƒ»ãƒ•ãƒªãƒ¼',
	'ãƒŒã‚«ãƒ»ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£',
	'ãƒŒã‚«ãƒ»ãƒ™ãƒªãƒ¼',
	'ãƒŒã‚«ãƒ»ãƒœã‚¤ãƒ‰',
	'ãƒŒã‚«ãƒ»ãƒœãƒ ãƒ‰ãƒ­ãƒƒãƒ—',
	'ãƒŒã‚«ãƒ»ãƒ©ãƒƒã‚·ãƒ¥',
	'ãƒŒã‚«ãƒ»ãƒ©ãƒ–',
	'ãƒŒã‚«ãƒ»ãƒªã‚­ã‚µãƒ¼',
] as const


// INGREDIENT_NAMES.ts
export const INGREDIENT_NAMES = [
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©',
	'ãƒŒã‚«ãƒ»ãƒã‚§ãƒªãƒ¼',
	'ãƒŒã‚«ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ—',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ã‚¯ã‚¢ãƒ³ã‚¿ãƒ ',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ãƒ“ã‚¯ãƒˆãƒªãƒ¼',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ãƒ¯ã‚¤ãƒ«ãƒ‰',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ã‚¯ã‚©ãƒ¼ãƒ„',
	'ãƒŒã‚«ãƒ»ã‚³ãƒ¼ãƒ©ãƒ»ãƒ€ãƒ¼ã‚¯',
	'ã‚­ãƒ£ãƒ­ãƒƒãƒˆãƒ•ãƒ©ãƒ¯ãƒ¼',
	'ãƒ†ã‚¤ãƒˆ',
	'æ±šã‚ŒãŸæ°´',
	'ã‚¦ã‚©ãƒƒã‚«',
	'ãƒãƒ¼ãƒœãƒ³',
	'ãƒ©ãƒ é…’',
	'Med-X',
] as const


//EFFECT_LABELS.ts
import type { EffectLabel, EffectName } from '@/nuka-mixer-recipe/RecipieType'

export const EFFECT_LABELS = [
	'HP',
	'AP',
	'Weight',
	'Value',
	'æœ€å¤§HP',
	'æœ€å¤§AP',
	'Rads',
	'Rad Resist',
	'ç·é‡é‡',
	'ã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–',
	'STR',
	'END',
	'AGI',
	'DMG Resist',
] as const

export const EFFECT_LABEL_MAP: Record<EffectName, EffectLabel> = {
	hp: 'HP',
	ap: 'AP',
	weight: 'Weight',
	value: 'Value',
	maxHp: 'æœ€å¤§HP',
	maxAp: 'æœ€å¤§AP',
	rads: 'Rads',
	radResist: 'Rad Resist',
	carryWeight: 'ç·é‡é‡',
	caffeine: 'ã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–',
	str: 'STR',
	end: 'END',
	agi: 'AGI',
	dmgResist: 'DMG Resist',
} as const
